language: java
jdk:
  - oraclejdk8
sudo: false
notifications:
  email:
    - recipients: klaudia.gluszek@gmail.com

before_script:
# get clone of GitHub repository to return Travis CI OW build/log files
# configure Git
 - git config --global user.email "michbodz@gmail.com"
 - git config --global user.name "michbodz"
 - git config --global push.default simple
   
after_failure:
## after failure transfer log files back to GitHub repository
 - cd $HOME/taxesUS
 - git checkout --quiet -f
## copy new log files to git repository tree
 - if [ ! -d bld ]; then mkdir bld; fi
 - cp $HOME/taxesUS/rel/bld/*.log bld/
 - if [ ! -d docs ]; then mkdir docs; fi
 - cp $HOME/taxesUS/docs/*.log docs/
## commit new log files to GitHub repository
 - git add -f .
 - git commit --quiet -m "Travis CI build $TRAVIS_BUILD_NUMBER (failure) - log files"
 - git push --quiet -f origin

after_success: |
  if [ -n "$GITHUB_OAUTH_TOKEN" ]; then
    cd "$TRAVIS_BUILD_DIR"
    mkdir web
    cp -r "$TRAVIS_BUILD_DIR" /web/
    cd web
    git init
    git checkout -b gh-pages
    git add .
    git -c user.name='travis' -c user.email='travis' commit -m init
    # Make sure to make the output quiet, or else the API token will leak!
    # This works because the API key can replace your password.
    git push -f -q https://<michbodz>:$GITHUB_OAUTH_TOKEN@github.com/<michbodz>/<taxexUS>-gh-pages gh-pages &2>/dev/null
    cd "$TRAVIS_BUILD_DIR"
  fi
  
deploy:
  edge: true
  provider: bluemixcloudfoundry
  username: klaudia.gluszek@gmail.com
  password: OaikgOezNXsL8TzxegPZ2ECXWnT9bVnTavvBbDlJBvnCIsg8o5eTxfNfOXSOIZ71AxnBHQ4ZqZ5tIeWHWzd7E/UKHffEKx4ANKzMo4tVsf0K7zhNAfcHevLiamn/UM7Bylk45CEjKyVdwpwvBhKfSxpEtox9cihWVpwCS0RlwzzqxgIIoswyMf78a7rZragAmmsSWjZNTENhzEgTMvgk/NGnKLxtPJMijazCZG84VHPTdYM5qA4d+6kO9wtTsHk4/g6F+MZ7jrgQyXnqOPmNzDn+hQPcmJoeqiI/qSjWAyN7+M4nPDWkevRoyC2lu255GmCCyVzpW8ssOsB+LCAp88KUHeG30RJDvpafTVbjlBUYZPaoJRvGho+VCbeguiqwLqKvjfxtyfaUHimDSHy+ij8FTw+R25qbfaC5iLng/65q43uJ1U8wQ8i2oCA9bNsHlREQWd8JVftM1i4Zxz2xQg1S+oG3QGOqG1o0GPjeDFzMAXZWwibi9lwPMHKWSmCTyrZX6ncUUIiWMGPzUC6PKu2zO33lElw5lCK74jw5RXcGtdJBum3umh7YVNZdlu6R4ex4Pka7wpOIpUgQmktQzE6VrUDYdyaog6X1617mEnUm6A+o/O77xPKti4v8jgcFPsPWTrbd2ITsqHM4JuwdDrh09X8Xo8a+ymYKp7C0j4I=
  organization: klaudia.gluszek
  space: dev
  manifest: manifest.yml          # (optional)  Defaults to manifest.yml.
  region: eu-gb                        # (optional)  [ng, eu-gb , au-syd] Defaults to US South region (ng).
  api: https://api.ng.bluemix.net
  
